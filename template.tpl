___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Billy Grace - Server Side Tag",
  "categories": [
    "ADVERTISING",
    "ATTRIBUTION",
    "MARKETING",
    "ANALYTICS",
  ],
  "brand": {
    "id": "billygrace",
    "displayName": "Billy Grace",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "Billy Grace\u0027s Server Side Tag implementation",
  "containerContexts": [
    "SERVER"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "trackingID",
    "displayName": "Tracking ID",
    "simpleValueType": true,
    "help": "e.g. ID-XX-XXXX",
    "alwaysInSummary": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      },
      {
        "type": "REGEX",
        "args": [
          "^ID-([A-Za-z0-9]+-)*[A-Za-z0-9]+$"
        ]
      }
    ]
  },
  {
    "type": "CHECKBOX",
    "name": "inheritEventName",
    "checkboxText": "Inherit Event Name",
    "simpleValueType": true,
    "help": "Uncheck this if you want to define a custom event name yourself like \u0027\u0027purchase\", \"subscribe\" etc",
    "defaultValue": true,
    "alwaysInSummary": false
  },
  {
    "type": "TEXT",
    "name": "customEventName",
    "displayName": "Custom Event Name",
    "simpleValueType": true,
    "help": "e.g. pageload, purchase add_to_cart",
    "enablingConditions": [
      {
        "paramName": "inheritEventName",
        "paramValue": false,
        "type": "EQUALS"
      }
    ],
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "eventInfoGroup",
    "displayName": "Event Data",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "TEXT",
        "name": "transaction_id",
        "displayName": "transaction_id",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "value",
        "displayName": "value",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "currency",
        "displayName": "currency",
        "simpleValueType": true
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "extraSettings",
    "displayName": "Extra Settings",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "TEXT",
        "name": "eventID",
        "displayName": "Event ID",
        "simpleValueType": true,
        "help": "Set the event ID field if you have setup Billy Grace tracking both on this server container as well as web container. This way both solutions can track the same website/app, as the event ID will be used to de-duplicate incoming events."
      },
      {
        "type": "RADIO",
        "name": "cookieSameSite",
        "radioItems": [
          {
            "value": "None",
            "displayValue": "None"
          },
          {
            "value": "Lax",
            "displayValue": "Lax"
          },
          {
            "value": "Strict",
            "displayValue": "Strict"
          }
        ],
        "simpleValueType": true,
        "help": "Only uses \"none\" if the server endpoint is doesn\u0027t share the same top level domain, as this will get your cookies marked as third party. See more: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#samesitesamesite-value",
        "defaultValue": "None",
        "displayName": "Samesite settings"
      },
      {
        "type": "CHECKBOX",
        "name": "cookieHttpOnly",
        "checkboxText": "Use http-only cookie",
        "simpleValueType": true,
        "defaultValue": true,
        "help": "Makes it inaccessible by javascript (header cookies only)"
      },
      {
        "type": "CHECKBOX",
        "name": "isDebug",
        "checkboxText": "Debug mode",
        "simpleValueType": true,
        "defaultValue": false,
        "help": "Will output log statements"
      },
      {
        "type": "CHECKBOX",
        "name": "useStaging",
        "checkboxText": "Use staging endpoint",
        "simpleValueType": true,
        "help": "Only check this box when explicitly required by Billy Grace staff"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_SERVER___

// Libraries needed
const encodeUriComponent = require('encodeUriComponent');
const generateRandom = require('generateRandom');
const getCookieValues = require('getCookieValues');
const getAllEventData = require('getAllEventData');
const log = require('logToConsole');
const makeString = require('makeString');
const sendHttpGet = require('sendHttpGet');
const setCookie = require('setCookie');
const getRequestHeader = require('getRequestHeader');
const getTimestamp = require('getTimestamp'); // getTimestamp() == Date.now() in js
const getTimestampMillis = require('getTimestampMillis');
const Math = require('Math');
const JSON = require('JSON');
const Object = require('Object');
const createRegex = require('createRegex');
const parseUrl = require('parseUrl');

// Mapping of GA4 events to names billy uses
const mappedEventNames = {
  page_view: 'pageload',
  'gtm.dom': 'pageload',
  add_payment_info: 'payment_info_submitted',
  add_to_cart: 'add_to_cart',
  begin_checkout: 'checkout_started',
  search: 'search_submitted',
  
  // Fallback for events coming from wp plugin with a different name
  'gtm4wp.addProductToCartEEC': 'add_to_cart',
  'gtm4wp.productClickEEC': 'page_viewed',
  'gtm4wp.checkoutOptionEEC': 'checkout_started',
  'gtm4wp.checkoutStepEEC': 'payment_info_submitted',
  'gtm4wp.orderCompletedEEC': 'checkout_completed'
};

// Options to always use for cookiets
const cookieOptions = {
  domain: 'auto',                   // Grabs the TLD from this request
  path: '/',                        // For all paths on this domain
  samesite: data.cookieSameSite,    // 'none' is third party, this is still first
  secure: true,                     // Only https
  'max-age': 3600 * 24 * 365 * 2,   // 2 years
  HttpOnly: !!data.cookieHttpOnly   // Double negation because the true value not string 'true'
};

// Other constants needed
const USER_ID_COOKIE = '__cookie_uid';
const GTMS_ID_COOKIE = '__bg_utm';
const VERSION = '0.5.0';
const VALID_PURCHASE_NAMES = ['purchase', 'order_completed'];

// Grab all the data being passed from the sst client
const allEvents = getAllEventData();

// Debugging
if (data.isDebug){
  log('Tag Configuration: ', data);
  log('incomingevents: ', getAllEventData());
  log('getCookieValues: ', getCookieValues(USER_ID_COOKIE));
}

// gtm-msr.appspot.com url events should not be tracked, as these are not real events
// See: https://community.piwik.pro/t/what-is-the-gtm-msr-page/2585/15
const incomingWebUrl = allEvents.page_location || getRequestHeader('referer');

if (incomingWebUrl && incomingWebUrl.lastIndexOf('https://gtm-msr.appspot.com/', 0) === 0) {  
  if (data.isDebug){
      log('Exiting early as current url is set to  ', incomingWebUrl);
  }
  return data.gtmOnSuccess();
}


// Similar to pixel js bundle
function getGuid() {
  const uidRegex = createRegex('[x]', 'g');

  return VERSION + '-xxxxxxxx-'.replace(uidRegex, function() {
    let r = generateRandom(0, 1000);
    return r.toString(36);
  }) + (1 * getTimestamp()).toString(36);
}

// The user ID is taken from a cookie, if present. If it's not present, a new ID
// is randomly generated and stored for later use.
function getUserId() {
  
  // Check the existence for both cookie headers or in event data, if not we need to generate one
  const userId = getCookieValues(USER_ID_COOKIE)[0] || allEvents[USER_ID_COOKIE] || getGuid();
  
  // The setCookie API adds a value to the 'cookie' header on the response.
  setCookie(USER_ID_COOKIE, makeString(userId), cookieOptions);

  return userId;
}


// Easily add params to the url
const mapEventName = function(inheritEventName, eventName) {
  // Use the custom name defined for this tag 
  if (!inheritEventName) {
    return data.customEventName;
  }
  
  // If there is no custom mapping from GA4 to billy, we use the incoming name
  if (!mappedEventNames[eventName]){
     return eventName;
  }
 
  // Map the GA4 event to a similar billy event
  return mappedEventNames[eventName];
};


function isPresent(variable) {
  return typeof(variable) !== 'undefined' && variable !== null && variable !== '';
}


// Basically a floadlight, that checks if the current urls has utm query params we search for and;
// - If there are query params matching the utmArray found, then save then all under cookie '__BillyPix_utm'
// - If no query from utmArray is found, then do nothing as existing values are 'session' based
function getAndUpdateGtmBgParamCookies() {
  const utmArray = [
    'utm_source', 'utm_medium', 'utm_term', 'utm_content', 'utm_campaign', 
    'utm_source_platform', 'utm_creative_format', 'utm_marketing_tactic',
    'bg_source', 'bg_source_id', 'bg_kw', 'bg_campaign', 'bg_aid_k', 'bg_aid_v'
  ];

  // We want to write utms to cookie storage, if any utm is matched from the current url (aka ad click)
  var save = {};
  var newUtms = false;

  // Parse all query params at once into an object
  // e.g. vazkir.com?id=57&name=king -> {id: 57, name: 'king'} 
  const url = allEvents.page_location || getRequestHeader('referer');
  const parsedParams = parseUrl(url).searchParams;

  for (var i = 0, l = utmArray.length; i < l; i++) {
    const utmKey = utmArray[i];

    // e.g. vazkir.com?utm_source=google.com -> utmKey:utm_source
    // Basically a null, undefined, '' check for the value of the utm key/name we matched
    if (isPresent(parsedParams[utmKey])){
      save[utmArray[i]] = parsedParams[utmKey];
      newUtms = true; // If any new one exists, we want to starts saving
    }
  }
  
  // Only write to cookie if there are any query params, don't need to purger existing ones because 'session' based
  if (newUtms){

    // Saves all the incoming utm values into the cookie storage as 1 string, meaning this also
    // e.g {utm_source:'vazkir.com', utm_medium:'phone'} -> '{'utm_source':'vazkir.com','utm_medium':'phone'}'
    // The setCookie API adds a value to the 'cookie' header on the response.
    setCookie(GTMS_ID_COOKIE, JSON.stringify(save), cookieOptions);
   
     // Return the dict with the latest params
     return save;
  }else{
    
    // Grab existing utm cookie storage if existent
    const cookieUtms = getCookieValues(GTMS_ID_COOKIE);
    
    // If no entry exists, we don't need to decode the json so return an empty object
    if (!cookieUtms[0]) {
      return {};
    }
    
    // Lets try to parse the stored values for the cookies
    return JSON.parse(cookieUtms[0]) || {};
  }
}


// Extra custom event data being send in the event
function mapCustomEventData(eventName, allEventData, data){
  let customEventData = {};

  // Purchase, order completed etc, lowercased check
  if (eventName && VALID_PURCHASE_NAMES.indexOf(eventName.toLowerCase()) >= 0){
    
    if (allEventData.value || allEventData.transaction_id){
      if (allEventData.price) customEventData.value = allEventData.price;
      if (allEventData.value) customEventData.value = allEventData.value;
      if (allEventData.transaction_id) customEventData.transaction_id = allEventData.transaction_id; 
      if (allEventData.currency) customEventData.currency = allEventData.currency;
    }
    
     // If any items (products) are included to this event
    else if (allEventData.items && allEventData.items[0]) {
      customEventData.content_type = 'product';
      
      // If there is only 1 product to add, so no second entry exists
      if (!allEventData.items[1]) {
        if (allEventData.items[0].item_name) customEventData.content_name = allEventData.items[0].item_name;
        if (allEventData.items[0].item_category) customEventData.content_category = allEventData.items[0].item_category;
        if (allEventData.items[0].quantity) customEventData.quantity = allEventData.items[0].quantity;
        if (allEventData.items[0].currency) customEventData.currency = allEventData.items[0].currency;
        if (allEventData.items[0].price) customEventData.value = allEventData.items[0].price;
        if (allEventData.transaction_id) customEventData.transaction_id = allEventData.transaction_id;
        
        // Headless shopify suport
        if (allEventData.items[0].order_id) customEventData.oid = allEventData.items[0].order_id;
        if (allEventData.items[0].checkout_token) customEventData.cot = allEventData.items[0].checkout_token;

        // Order value to use for this order
        if (allEventData.items[0].value) {
          customEventData.value = allEventData.items[0].value;
        }
        // GA4 can define value outside of item list
        else if (allEventData.value){
          customEventData.value = allEventData.value;
        }
        // Caluclate the order value ourselves
        else if (allEventData.items[0].price && allEventData.items[0].quantity){
          customEventData.value = allEventData.items[0].quantity * allEventData.items[0].price;
        }
        // Assuming a quantity of 1, as no quantity given 
        else if (allEventData.items[0].price){
          customEventData.value = allEventData.items[0].value;
        }          
      }
    }
  }

  // If any of the values are set, then override anything we currently have
  if (data.transaction_id) customEventData.transaction_id = data.transaction_id;
  if (data.value) customEventData.value = data.value;
  if (data.currency) customEventData.currency = data.currency;
  
  // Used for de-duplication and is send as event data
  if (allEventData.event_id) customEventData.event_id = allEventData.event_id;
  
  // Just an empty string so no object parsing will happen on receival
  if (Object.keys(customEventData).length === 0){
     return '';
  }
  
  // Prepare data to be send out
  return JSON.stringify(customEventData);
}

// Updates and grabs the right params we need to send to the bg backend
const adParams = getAndUpdateGtmBgParamCookies();

// Optionally overridable to another name
const eventName = mapEventName(data.inheritEventName, allEvents.event_name);

// Grab all the event data we need
const eventData = mapCustomEventData(eventName, allEvents, data);

if (data.isDebug){
  log('eventName', eventName);
  log('eventData', eventData);
  log('referer', allEvents.page_referrer || getRequestHeader('referer'));
}

const trackingData = {
  id:         data.trackingID, // Website ID
  uid:        getUserId(), // User ID
  session_id: allEvents.session_id || allEvents.ga_session_id, // Custom session id or ga's one
  ev:         eventName, // Event triggered
  ed:         eventData, // Custom Event data (e.g. purchase event information)
  v:          VERSION, // Pixel code version
  ts:         Math.round(getTimestampMillis() / 1000), // Timestamp when event was triggered
  sr:         allEvents.screen_resolution || 'unknown', // Screen resolution
  dt:         allEvents.page_title || 'unknown', // Document title
  
  // The following parameters are unused and unavailable from GA4 by default, so they are skipped:
  de:           '', // Document encoding
  vp:           '', // Viewport size
  cd:           '', // Color depth
  bn:           '', // Browser name and version number
  md:           '', // Is a mobile device?
  tz:           '', // Timezone
    
  // Extra server side params
  ip_override:  allEvents.ip_override || '', // Extra server-side parameter for IP override
  tt:           'web_sst',                   // Tracking type: So where it happened
  event_id:     '',                          // Field not used, as this is set in the event data (ed)

  // UTM Query params:
  utm_source:           adParams.utm_source || '',
  utm_medium:           adParams.utm_medium || '',
  utm_term:             adParams.utm_term || '',
  utm_content:          adParams.utm_content || '',
  utm_campaign:         adParams.utm_campaign || '',
  utm_source_platform:  adParams.utm_source_platform || '',
  utm_creative_format:  adParams.utm_creative_format || '',
  utm_marketing_tactic: adParams.utm_marketing_tactic || '',

  // BG Query params:
  bg_source:    adParams.bg_source || '',
  bg_source_id: adParams.bg_source_id || '',
  bg_kw:        adParams.bg_kw || '',
  bg_campaign:  adParams.bg_campaign || '',
  bg_aid_k:     adParams.bg_aid_k || '',
  
  // Longest params that are more error prone
  dl:         allEvents.page_location || getRequestHeader('origin'),   // Document location
  rl:         allEvents.page_referrer || getRequestHeader('referer'),  // Referrer location
  ua:         allEvents.user_agent || 'unknown',                       // User agent
};


function buildParams(allParamsObj) {
  let paramsList = [];
  
  // Add them all to an array while encoded for url passing
  Object.keys(allParamsObj).forEach(function(key,index) {
    const value = allParamsObj[key];
    if (typeof(value) !== 'undefined' && value !== null && value !== ''){
       paramsList.push(key + '=' + encodeUriComponent(value.toString()));
    }else{
       paramsList.push(key + '=');
    }
   });
    // Return the chained string to be used in the url
  return paramsList.join('&');
}


// The event name is taken from either the tag's configuration or from the
// event. Configuration data comes into the sandboxed code as a predefined
const endpoint = data.useStaging ? 'https://staging.b.billypx.com' : 'https://b.billypx.com';
const paramString = buildParams(trackingData);

const backendGetUrl = endpoint + '?' + paramString;

if (data.isDebug){
  log('backendGetUrl: ', backendGetUrl);
}


// The sendHttpGet API takes a URL and returns a promise that resolves with the
// result once the request completes. You must call data.gtmOnSuccess() or
// data.gtmOnFailure() so that the container knows when the tag has finished
// executing.
sendHttpGet(backendGetUrl).then((result) => {
  if (result.statusCode >= 200 && result.statusCode < 300) {
    data.gtmOnSuccess();
  } else {
    data.gtmOnFailure();
  }
});


___SERVER_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "__cookie_uid"
              },
              {
                "type": 1,
                "string": "__bg_utm"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "__cookie_uid"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "__bg_utm"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_event_data",
        "versionId": "1"
      },
      "param": [
        {
          "key": "eventDataAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_http",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_request",
        "versionId": "1"
      },
      "param": [
        {
          "key": "queryParametersAllowed",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "remoteAddressAllowed",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "headersAllowed",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "pathAllowed",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "queryParameterAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "requestAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "headerAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: page_view_test
  code: "// Uncoming event data to parse\nmock('getAllEventData', mockPageviewData);\n\
    \n// Call runCode to run the template's code.\nrunCode(mockInputData);\n\n// Verify\
    \ that the tag finished successfully, checking 'gtmOnSuccess' does not work \n\
    assertApi('sendHttpGet').wasCalled();"
- name: purchase_single_test
  code: "\n// Purchase data with items and value\nmock('getAllEventData', mockPurchaseEventData);\n\
    \n\n// Call runCode to run the template's code.\nrunCode(mockInputData);\n\n//\
    \ Verify that the tag finished successfully, checking 'gtmOnSuccess' does not\
    \ work \nassertApi('sendHttpGet').wasCalled();"
- name: utms_test
  code: "// Make sure to set utms on the location so that they are parsed\nmockPageviewData.page_location\
    \ = \"https://www.billygrace.com?utm_source=google&bg_source_id=123&gtm_debug=1717425224929\"\
    ;\n\n// Pageview with utms set\nmock('getAllEventData', mockPageviewData);\n\n\
    // Call runCode to run the template's code.\nrunCode(mockInputData);\n\n// Verify\
    \ that the tag finished successfully, checking 'gtmOnSuccess' does not work \n\
    assertApi('sendHttpGet').wasCalled();"
- name: gtm-msr_appspot_fake_url
  code: |-
    // When the location is set to the test url, then it needs to exit fast
    mockPageviewData.page_location = "https://gtm-msr.appspot.com/render2?id=GTM-XXXXXX";

    // Pageview with utms set
    mock('getAllEventData', mockPageviewData);

    // Call runCode to run the template's code.
    runCode(mockInputData);

    // Verify that no call was made to Billy's backend
    assertApi('sendHttpGet').wasNotCalled();

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
setup: "// Docs: https://www.simoahava.com/analytics/writing-tests-for-custom-templates-google-tag-manager/\n\
  const log = require('logToConsole');\n\nlet mockInputData = {\n  // Main data\n\
  \  \"trackingID\": \"ID-XX-XXXX\",\n  \"isDebug\": true,\n  \n  // Event dara\n\
  \  \"inheritEventName\": true,\n  \"customEventName\": undefined,\n  \"value\":\
  \ undefined,\n  \"transaction_id\": undefined,\n  \"currency\": undefined,\n  \n\
  \  // Cookie data\n  \"cookieHttpOnly\": true,\n  \"endpointUrl\": \"https://staging.b.billypx.com\"\
  ,\n  \"cookieSameSite\": \"None\",\n  \n  // Extra data \n  \"eventID\": \"unique_eid_123\"\
  \n};\n\nlet mockPageviewData = {\n  \"x-ga-protocol_version\": \"2\",\n  \"x-ga-measurement_id\"\
  : \"G-SOME-ID\",\n  \"x-ga-gtm_version\": \"12345VERSION\",\n  \"client_id\": \"\
  1263466998.1711449381\",\n  \"x-ga-ecid\": \"124ECID\",\n  \"language\": \"en-gb\"\
  ,\n  \"screen_resolution\": \"2560x1080\",\n  \"event_location\": {\n    \"country\"\
  : \"NL\",\n    \"region\": \"NH\"\n  },\n  \"x-ga-are\": \"1\",\n  \"x-ga-pscdl\"\
  : \"\",\n  \"x-ga-request_count\": 1,\n  \"ga_session_id\": \"1712050703\",\n  \"\
  ga_session_number\": 8,\n  \"x-ga-mp2-seg\": \"1\",\n  \"page_location\": \"https://www.billygrace.com\"\
  ,\n  \"page_referrer\": \"https://www.billygrace.com/feature-overview/\",\n  \"\
  page_title\": \"Billy - GTM\",\n  \"event_name\": \"page_view\",\n  \"x-ga-tfd\"\
  : 253,\n  \"ip_override\": \"127.12.57.00\",\n  \"user_agent\": \"Mozilla/5.0 (Linux;\
  \ U; Linux i676 ) Gecko/20100101 Firefox/68.3\"\n};\n\n\nlet mockPurchaseEventData\
  \ = {\n  \"x-ga-protocol_version\": \"2\",\n  \"x-ga-measurement_id\": \"G-SOME-ID\"\
  ,\n  \"x-ga-gtm_version\": \"12345VERSION\",\n  \"client_id\": \"1263466998.1711449381\"\
  ,\n  \"x-ga-ecid\": \"124ECID\",\n  \"language\": \"en-gb\",\n  \"screen_resolution\"\
  : \"2560x1080\",\n  \"event_location\": {\n    \"country\": \"NL\",\n    \"region\"\
  : \"NH\"\n  },\n  \"x-ga-are\": \"1\",\n  \"x-ga-pscdl\": \"\",\n  \"x-ga-request_count\"\
  : 1,\n  \"ga_session_id\": \"1712050703\",\n  \"ga_session_number\": 8,\n  \"x-ga-mp2-seg\"\
  : \"1\",\n  \"page_location\": \"https://www.billygrace.com\",\n  \"page_referrer\"\
  : \"https://www.billygrace.com/feature-overview/\",\n  \"page_title\": \"Billy -\
  \ GTM\",\n    \"event_name\": \"purchase\",\n  \"items\": [{\n    \"item_id\": \"\
  P12345\",\n    \"item_name\": \"Product Name\",\n    \"item_category\": \"Category\"\
  ,\n    \"quantity\": 1,\n    \"price\": 25\n  }],\n  \"currency\": \"USD\",\n  \"\
  transaction_id\": \"0001\",\n  \"affiliation\": \"Online Store\",\n  \"value\":\
  \ 25,\n  \"tax\": 1.75,\n  \"shipping\": 5,\n  \"engagement_time_msec\": 1401, \
  \ \n  \"ip_override\": \"127.12.57.00\",\n  \"user_agent\": \"Mozilla/5.0 (Linux;\
  \ U; Linux i676 ) Gecko/20100101 Firefox/68.3\"\n};\n\n"


___NOTES___

v0.0.1 - 29 may 2024 (Vasco)
* Updating naming samesite field


